<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>The basic Sprague age-splitting method. — sprague • DemoTools</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="The basic Sprague age-splitting method. — sprague" />
<meta property="og:description" content="This method is used to interpolate counts based on the Sprague formula. It is based on the first stage of the Sprague R script prepared by Thomas Buettner and Patrick Gerland, itself based on the description in Siegel and Swanson, 2004, p. 727." />
<meta property="og:image" content="https://timriffe.github.io/DemoTools/logo.png" />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">DemoTools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.2.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Age-heaping_quality_with_Demotools.html">Age-heaping indices with DemoTools</a>
    </li>
    <li>
      <a href="../articles/case_study_1.html">DemoTools: A case study</a>
    </li>
    <li>
      <a href="../articles/graduation_with_demotools.html">Graduation with DemoTools</a>
    </li>
    <li>
      <a href="../articles/lifetable_with_demotools.html">The lifetable with DemoTools</a>
    </li>
    <li>
      <a href="../articles/smoothing_with_demotools.html">Smoothing with DemoTools</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>The basic Sprague age-splitting method.</h1>
    
    <div class="hidden name"><code>sprague.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This method is used to interpolate counts based on the Sprague formula. It is based on the first stage of the Sprague R script prepared by Thomas Buettner and Patrick Gerland, itself based on the description in Siegel and Swanson, 2004, p. 727.</p>
    </div>

    <pre class="usage"><span class='fu'>sprague</span>(<span class='no'>popmat</span>, <span class='kw'>Age</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/integer.html'>as.integer</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>rownames</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>as.matrix</a></span>(<span class='no'>popmat</span>))),
  <span class='kw'>OAG</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>popmat</th>
      <td><p>numeric. A matrix of population counts in 5-year age groups with integer-labeled margins (age in rows and year in columns).</p></td>
    </tr>
    <tr>
      <th>Age</th>
      <td><p>integer. Vector of lower age bound of age groups. Detected from row names of <code>popmat</code> if missing.</p></td>
    </tr>
    <tr>
      <th>OAG</th>
      <td><p>logical. Whether or not the final age group open. Default <code>TRUE</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An age-period matrix of split population counts with the same number of
columns as <code>popmat</code>, and single ages in rows.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Ages should refer to lower age bounds, ending in the open age group in the last row (not a closed terminal age). Dimension labelling is necessary. There must be at least six age groups (including the open group). One year of data will work as well, as long as it's given as or coercible to a single-column matrix. This method may produce negative values, most likely in the youngest or oldest ages.</p>
<p>If the highest age does not end in a 0 or 5, and <code>OAG == TRUE</code>, then the open age will be grouped down to the next highest age ending in 0 or 5. If the highest age does not end in a 0 or 5, and <code>OAG == FALSE</code>, then results extend to single ages covering the entire 5-year age group.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Sprague TB (1880).
&#8220;Explanation of a new formula for interpolation.&#8221;
<em>Journal of the Institute of Actuaries</em>, <b>22</b>(4), 270--285.

Shryock HS, Siegel JS, Larmon EA (1973).
<em>The methods and materials of demography</em>.
US Bureau of the Census.

Siegel Jacob S, Swanson David A (eds.) (2004).
<em>The Methods and Materials of Demography</em>, 2 edition.
Elsevier Academic Press, California, USA, San Diego, USA.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span>(<span class='no'>pop5_mat</span>) <span class='co'># this is the entire matrix</span></div><div class='output co'>#&gt;     1950  1951  1952  1953  1954
#&gt; 0  54170 57424 60272 62727 64816
#&gt; 5  44775 44475 44780 45681 47137
#&gt; 10 42142 41752 41804 42101 42508
#&gt; 15 38464 39628 40229 40474 40532
#&gt; 20 34406 34757 35155 35599 36083
#&gt; 25 30386 30605 30978 31439 31940</div><div class='input'><span class='co'># the last value is an open age group, preserve as such:</span>
<span class='no'>p1</span>                            <span class='kw'>&lt;-</span> <span class='fu'>sprague</span>(<span class='no'>pop5_mat</span>, <span class='kw'>OAG</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span>(<span class='no'>p1</span>); <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>tail</a></span>(<span class='no'>p1</span>)</div><div class='output co'>#&gt;        1950      1951      1952      1953     1954
#&gt; 0 12172.491 13335.035 14267.992 14942.285 15353.26
#&gt; 1 11380.448 12243.392 12963.256 13534.800 13962.34
#&gt; 2 10717.448 11325.976 11865.352 12345.568 12775.62
#&gt; 3 10171.000 10567.384 10956.496 11356.168 11776.49
#&gt; 4  9728.613  9952.213 10218.904 10548.179 10948.29
#&gt; 5  9377.795  9465.059  9634.792  9903.181 10274.40</div><div class='output co'>#&gt;       1950    1951    1952    1953    1954
#&gt; 95  5.8576  7.1072  7.3408  6.7776  6.4416
#&gt; 96  4.5040  5.5280  5.6640  5.1440  4.8160
#&gt; 97  3.4240  3.7680  3.6960  3.3440  3.1680
#&gt; 98  2.3200  1.4400  1.0320  1.0000  1.1520
#&gt; 99  0.8944 -1.8432 -2.7328 -2.2656 -1.5776
#&gt; 100 0.0000  1.0000  1.0000  1.0000  2.0000</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/colSums.html'>colSums</a></span>(<span class='no'>p1</span>) - <span class='fu'><a href='https://rdrr.io/r/base/colSums.html'>colSums</a></span>(<span class='no'>pop5_mat</span>)</div><div class='output co'>#&gt; 1950 1951 1952 1953 1954 
#&gt;    0    0    0    0    0 </div><div class='input'>
<span class='co'># another case, starting with single ages</span>
<span class='no'>Age</span>                           <span class='kw'>&lt;-</span> <span class='fl'>0</span>:<span class='fl'>100</span>
<span class='co'># notice how this particular case produces a negative value in the last age</span>
<span class='co'># before OAG:</span>
<span class='no'>pops</span>                          <span class='kw'>&lt;-</span> <span class='fu'>sprague</span>(<span class='kw'>popmat</span> <span class='kw'>=</span> <span class='no'>pop1m_ind</span>, <span class='kw'>Age</span> <span class='kw'>=</span> <span class='no'>Age</span>, <span class='kw'>OAG</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='kw'>if</span> (<span class='fl'>FALSE</span>) {
<span class='no'>yrs</span>                           <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span>(<span class='fl'>1950</span>:<span class='fl'>1954</span>)
<span class='fu'><a href='https://rdrr.io/r/graphics/matplot.html'>matplot</a></span>(<span class='fl'>0</span>:<span class='fl'>100</span>,<span class='no'>p1</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>'l'</span>, <span class='kw'>col</span> <span class='kw'>=</span> <span class='fl'>5</span>:<span class='fl'>9</span>,<span class='kw'>lty</span> <span class='kw'>=</span> <span class='fl'>1</span>,<span class='kw'>xlab</span> <span class='kw'>=</span> <span class='st'>'Age'</span>,<span class='kw'>ylab</span> <span class='kw'>=</span> <span class='st'>'Counts'</span>,
<span class='kw'>main</span><span class='kw'>=</span> <span class='st'>'Ungrouped counts'</span>)
<span class='fu'><a href='https://rdrr.io/r/graphics/legend.html'>legend</a></span>(<span class='st'>'topright'</span>,
<span class='kw'>title</span> <span class='kw'>=</span> <span class='st'>'Year'</span>,
<span class='kw'>lty</span><span class='kw'>=</span><span class='fl'>1</span>,
<span class='kw'>col</span><span class='kw'>=</span><span class='fl'>5</span>:<span class='fl'>9</span>,
<span class='kw'>legend</span> <span class='kw'>=</span> <span class='no'>yrs</span>
)
}</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#references">References</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Tim Riffe, José Manuel Aburto, Ilya Kashnitsky, Marius D. Pascariu, Monica Alexander, Sean Fennell.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


