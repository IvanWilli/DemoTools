<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Detect if heaping is worse on terminal digits 0s than on 5s — zero_pref_sawtooth • DemoTools</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Detect if heaping is worse on terminal digits 0s than on 5s — zero_pref_sawtooth" />
<meta property="og:description" content="Ages ending in 0 often have higher apparent heaping than ages ending in 5.
In this case, data in 5-year age bins might show a sawtooth pattern.
If heaping ocurrs in roughly the same amount on 0s and 5s, then it may be sufficient to group data into 5-year
 age groups and then graduate back to single ages. However, if heaping is worse on 0s, then this procedure tends
 to produce a wavy pattern in count data, with 10-year periodicity. In this case it is recommended to use one of
 the methods of agesmth() as an intermediate step before graduation." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">DemoTools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.2.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Age-heaping_quality_with_Demotools.html">Age-heaping indices with DemoTools</a>
    </li>
    <li>
      <a href="../articles/case_study_1.html">DemoTools: A case study</a>
    </li>
    <li>
      <a href="../articles/graduation_with_demotools.html">Graduation with DemoTools</a>
    </li>
    <li>
      <a href="../articles/lifetable_with_demotools.html">The lifetable with DemoTools</a>
    </li>
    <li>
      <a href="../articles/smoothing_with_demotools.html">Smoothing with DemoTools</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Detect if heaping is worse on terminal digits 0s than on 5s</h1>
    
    <div class="hidden name"><code>zero_pref_sawtooth.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Ages ending in 0 often have higher apparent heaping than ages ending in 5.
In this case, data in 5-year age bins might show a sawtooth pattern.
If heaping ocurrs in roughly the same amount on 0s and 5s, then it may be sufficient to group data into 5-year
 age groups and then graduate back to single ages. However, if heaping is worse on 0s, then this procedure tends
 to produce a wavy pattern in count data, with 10-year periodicity. In this case it is recommended to use one of
 the methods of <code><a href='agesmth.html'>agesmth()</a></code> as an intermediate step before graduation.</p>
    </div>

    <pre class="usage"><span class='fu'>zero_pref_sawtooth</span>(<span class='no'>Value</span>, <span class='no'>Age</span>, <span class='kw'>ageMin</span> <span class='kw'>=</span> <span class='fl'>40</span>, <span class='kw'>ageMax</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>max</a></span>(<span class='no'>Age</span>[<span class='no'>Age</span><span class='kw'>%%</span><span class='fl'>5</span>
  <span class='kw'>==</span> <span class='fl'>0</span>]) - <span class='fl'>10</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>Value</th>
      <td><p>numeric. A vector of demographic counts by single age.</p></td>
    </tr>
    <tr>
      <th>Age</th>
      <td><p>numeric. A vector of ages corresponding to the lower integer bound of the counts.</p></td>
    </tr>
    <tr>
      <th>ageMin</th>
      <td><p>integer evenly divisible by 10. Lower bound of evaluated age range, default 40.</p></td>
    </tr>
    <tr>
      <th>ageMax</th>
      <td><p>integer evently divisibly by 5. Upper bound of evaluated age range, defaults to highest age evenly divisible by 10.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>numeric, ratio of 0s to 5s. If &gt; 1 then the pattern is present.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Data is grouped to 5-year age bins. The ratio of each value to the average of its neighboring values
is calculated. If 0s have stronger attraction than 5s then we expect these ratios to be &gt;1 for 0s and &lt;1 for 5s.
 Ratios are compared within each 10-year age group in the evaluated age range. If in the evaluated range there are
 at most two exceptions to this rule (0s&gt;5s), then the ratio of the mean of these ratios is returned, and it is
 recommended to use a smoother method. Higher values suggest use of a more aggressive method.
 This approach is only slightly different from that of Feeney, as implemented in the <code><a href='zigzag.html'>zigzag()</a></code> functions.
 This is not a general measure of roughness, but rather an indicator of this particular pattern of age attraction.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Feeney G (1979).
&#8220;A technique for correcting age distributions for heaping on multiples of five.&#8221;
<em>Asian and Pacific Census Forum</em>, <b>5</b>(3), 12--15.

Feeney, G. 2013 "Removing "Zigzag" from Age Data," http://demographer.com/white-papers/2013-removing-zigzag-from-age-data/</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='no'>Age</span> <span class='kw'>&lt;-</span> <span class='fl'>0</span>:<span class='fl'>99</span>
<span class='no'>smoothed</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='sprague.html'>sprague</a></span>(
                <span class='fu'><a href='agesmth.html'>agesmth</a></span>(<span class='no'>pop1m_pasex</span>,
                                <span class='no'>Age</span>,
                                <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"Strong"</span>,
                                <span class='kw'>OAG</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
                                <span class='kw'>young.tail</span> <span class='kw'>=</span> <span class='st'>"Arriaga"</span>),
                <span class='kw'>OAG</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
<span class='co'># not saw-tooth jagged</span>
<span class='fu'>zero_pref_sawtooth</span>(<span class='no'>smoothed</span>, <span class='no'>Age</span>)</div><div class='output co'>#&gt; [1] 0.9825734</div><div class='input'><span class='co'># saw-tooth pattern detected in older ages</span>
<span class='fu'>zero_pref_sawtooth</span>(<span class='no'>pop1m_pasex</span>, <span class='no'>Age</span>)</div><div class='output co'>#&gt; [1] 1.315748</div><div class='input'><span class='co'># heaped, but no 0&gt;5 preference</span>
<span class='no'>h1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='heapify.html'>heapify</a></span>(<span class='no'>smoothed</span>, <span class='no'>Age</span>, <span class='kw'>p0</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>p5</span> <span class='kw'>=</span> <span class='fl'>1</span>)
<span class='co'># heaping progressively worse on 0s than on 5s.</span>
<span class='no'>h2</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='heapify.html'>heapify</a></span>(<span class='no'>smoothed</span>, <span class='no'>Age</span>, <span class='kw'>p0</span> <span class='kw'>=</span> <span class='fl'>1.2</span>, <span class='kw'>p5</span> <span class='kw'>=</span> <span class='fl'>1</span>)
<span class='no'>h3</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='heapify.html'>heapify</a></span>(<span class='no'>smoothed</span>, <span class='no'>Age</span>, <span class='kw'>p0</span> <span class='kw'>=</span> <span class='fl'>1.5</span>, <span class='kw'>p5</span> <span class='kw'>=</span> <span class='fl'>.8</span>)
<span class='no'>h4</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='heapify.html'>heapify</a></span>(<span class='no'>smoothed</span>, <span class='no'>Age</span>, <span class='kw'>p0</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>p5</span> <span class='kw'>=</span> <span class='fl'>.5</span>)

<span class='kw'>if</span> (<span class='fl'>FALSE</span>) {
        <span class='fu'><a href='https://rdrr.io/r/graphics/plot.html'>plot</a></span>(<span class='no'>Age</span>, <span class='no'>smoothed</span>, <span class='kw'>type</span><span class='kw'>=</span><span class='st'>'l'</span>)
        <span class='fu'><a href='https://rdrr.io/r/graphics/lines.html'>lines</a></span>(<span class='no'>Age</span>, <span class='no'>h1</span>,<span class='kw'>col</span><span class='kw'>=</span><span class='st'>"blue"</span>)
        <span class='fu'><a href='https://rdrr.io/r/graphics/lines.html'>lines</a></span>(<span class='no'>Age</span>, <span class='no'>h2</span>,<span class='kw'>col</span><span class='kw'>=</span><span class='st'>"green"</span>)
        <span class='fu'><a href='https://rdrr.io/r/graphics/lines.html'>lines</a></span>(<span class='no'>Age</span>, <span class='no'>h3</span>,<span class='kw'>col</span><span class='kw'>=</span><span class='st'>"red"</span>)
}
<span class='fu'>zero_pref_sawtooth</span>(<span class='no'>h1</span>, <span class='no'>Age</span>)</div><div class='output co'>#&gt; [1] 1.013527</div><div class='input'><span class='co'># 0-preference &gt; 5 pref</span>
<span class='fu'>zero_pref_sawtooth</span>(<span class='no'>h2</span>, <span class='no'>Age</span>)</div><div class='output co'>#&gt; [1] 1.148617</div><div class='input'><span class='co'># increasing values</span>
<span class='fu'>zero_pref_sawtooth</span>(<span class='no'>h3</span>, <span class='no'>Age</span>)</div><div class='output co'>#&gt; [1] 1.584231</div><div class='input'><span class='fu'>zero_pref_sawtooth</span>(<span class='no'>h4</span>, <span class='no'>Age</span>,<span class='kw'>ageMin</span><span class='kw'>=</span><span class='fl'>35</span>)</div><div class='output co'>#&gt; [1] 2.895501</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#references">References</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Tim Riffe, Sean Fennell, Jose Manuel Aburto.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


